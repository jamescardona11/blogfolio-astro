---
import Link from '../Link.astro'
import Icons from '../icons/Icons.astro'

interface Props {
  value: any
}
const { value } = Astro.props

const src_file = value.type === 'external' ? value.external.url : value.file.url
const splitSourceArray = src_file.split('/')
const lastElementInArray = splitSourceArray[splitSourceArray.length - 1]
const caption_file =
  value?.caption?.length >= 1 ? value.caption[0]?.plain_text : ''
---

<figure>
  <div class='flex gap-1 text-gray-700 dark:text-zinc-400'>
    <Icons kind='link' />
    <Link
      class='text-gray-700 dark:text-zinc-400'
      href={src_file}
      pass-href={true}
    >
      {lastElementInArray.split('?')[0]}
    </Link>
  </div>
  {caption_file !== '' && <figcaption>{caption_file}</figcaption>}
</figure>
