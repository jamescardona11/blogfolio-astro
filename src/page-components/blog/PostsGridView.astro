---
import { Image } from 'astro:assets'
import type { CollectionEntry } from 'astro:content'

import Link from '@components/Link.astro'
import FormattedDate from '@/page-components/blog/FormattedDate.astro'

interface Props {
  posts: CollectionEntry<'blog'>[]
}

const { posts } = Astro.props
---

<div grid-view class='grid gap-10 sm:grid-cols-2'>
  {
    // destructuring data from the collection
    // review `config.ts` inside the content folder to destructure the right data
    posts.map(({ slug, data: { image, title, summary, date } }) => (
      <article class='group relative flex flex-col space-y-2'>
        {image && (
          <Image
            src={image}
            alt={title}
            width={804}
            height={452}
            class='rounded-md border bg-muted transition-colors'
          />
        )}
        <h2 class='text-2xl font-extrabold'>{title}</h2>

        {date && (
          <p class='text-sm text-muted-foreground'>
            <FormattedDate date={date} />
          </p>
        )}
        {summary && <p class='text-muted-foreground'>{summary}</p>}
        <Link href={`/blog/${slug}`} class='absolute inset-0'>
          <span class='sr-only'>View Article</span>
        </Link>
      </article>
    ))
  }
</div>
